

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Z-PARDY: Apocalypse Grammar</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        :root {
            --neon-pink: #ff00ff;
            --neon-blue: #00ffff;
            --neon-green: #00ff00;
            --neon-yellow: #ffff00;
            --dark-bg: #0a0a12;
            --grid-bg: #1a1a2e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: var(--dark-bg);
            color: #fff;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 0, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 20%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-title {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink);
            animation: flicker 2s infinite alternate;
            font-size: 2.5rem;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .category {
            background-color: var(--grid-bg);
            border: 2px solid var(--neon-blue);
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            text-shadow: 0 0 5px var(--neon-blue);
        }
        
        .question-cell {
            background-color: var(--grid-bg);
            border: 2px solid var(--neon-pink);
            color: var(--neon-yellow);
            padding: 10px;
            text-align: center;
            font-size: 1.5rem;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
        }
        
        .question-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.5);
        }
        
        .question-cell.selected {
            background-color: var(--dark-bg);
            color: rgba(255, 255, 0, 0.3);
            border-color: rgba(255, 0, 255, 0.3);
            cursor: default;
        }
        
        .question-cell::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-pink), transparent);
            animation: scanline 2s linear infinite;
        }
        
        .teams-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border: 2px solid var(--neon-green);
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.5);
            min-width: 150px;
        }
        
        .team-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .team-name {
            margin-bottom: 5px;
            font-size: 0.8rem;
        }
        
        .team-score {
            font-size: 1.2rem;
            color: var(--neon-green);
            text-shadow: 0 0 5px var(--neon-green);
        }
        
        .team.active {
            box-shadow: 0 0 15px var(--neon-green);
            animation: pulse 1s infinite alternate;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--grid-bg);
            border: 3px solid var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue), inset 0 0 10px var(--neon-blue);
            padding: 20px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: glitch 0.5s ease-out;
        }
        
        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.6;
        }
        
        .btn {
            padding: 10px 20px;
            background-color: transparent;
            border: 2px solid var(--neon-pink);
            color: white;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: rgba(255, 0, 255, 0.2);
            box-shadow: 0 0 10px var(--neon-pink);
        }
        
        .btn-correct {
            border-color: var(--neon-green);
        }
        
        .btn-correct:hover {
            background-color: rgba(0, 255, 0, 0.2);
            box-shadow: 0 0 10px var(--neon-green);
        }
        
        .btn-incorrect {
            border-color: var(--neon-pink);
        }
        
        .btn-incorrect:hover {
            background-color: rgba(255, 0, 255, 0.2);
            box-shadow: 0 0 10px var(--neon-pink);
        }
        
        .btn-check {
            border-color: var(--neon-blue);
        }
        
        .btn-check:hover {
            background-color: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 10px var(--neon-blue);
        }
        
        .btn-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .timer {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            color: var(--neon-yellow);
            text-shadow: 0 0 5px var(--neon-yellow);
        }
        
        .zombie-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            overflow: hidden;
            pointer-events: none;
        }
        
        .zombie {
            position: absolute;
            bottom: 0;
            width: 50px;
            height: 60px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect x='10' y='2' width='12' height='12' fill='%2383a93f'/%3E%3Crect x='6' y='6' width='4' height='4' fill='%2383a93f'/%3E%3Crect x='22' y='6' width='4' height='4' fill='%2383a93f'/%3E%3Crect x='10' y='14' width='12' height='10' fill='%2383a93f'/%3E%3Crect x='6' y='16' width='4' height='6' fill='%2383a93f'/%3E%3Crect x='22' y='16' width='4' height='6' fill='%2383a93f'/%3E%3Crect x='10' y='24' width='4' height='6' fill='%2383a93f'/%3E%3Crect x='18' y='24' width='4' height='6' fill='%2383a93f'/%3E%3Crect x='12' y='6' width='2' height='2' fill='%23000'/%3E%3Crect x='18' y='6' width='2' height='2' fill='%23000'/%3E%3Crect x='14' y='10' width='4' height='2' fill='%23000'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            animation: zombieWalk 10s linear infinite;
        }
        
        .final-round {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        
        .final-round h2 {
            color: var(--neon-yellow);
            text-shadow: 0 0 10px var(--neon-yellow);
            margin-bottom: 20px;
            animation: flicker 3s infinite alternate;
        }
        
        .final-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding: 20px;
            border: 2px solid var(--neon-blue);
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .city-background {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 200'%3E%3Cg fill='%23331c54'%3E%3Crect x='0' y='150' width='50' height='50'/%3E%3Crect x='20' y='120' width='20' height='30'/%3E%3Crect x='50' y='100' width='30' height='100'/%3E%3Crect x='60' y='70' width='10' height='30'/%3E%3Crect x='80' y='130' width='40' height='70'/%3E%3Crect x='90' y='110' width='20' height='20'/%3E%3Crect x='120' y='80' width='30' height='120'/%3E%3Crect x='130' y='60' width='10' height='20'/%3E%3Crect x='150' y='140' width='50' height='60'/%3E%3Crect x='170' y='110' width='10' height='30'/%3E%3Crect x='200' y='120' width='40' height='80'/%3E%3Crect x='220' y='70' width='15' height='50'/%3E%3Crect x='240' y='90' width='10' height='30'/%3E%3Crect x='250' y='140' width='30' height='60'/%3E%3Crect x='280' y='100' width='20' height='100'/%3E%3Crect x='300' y='130' width='40' height='70'/%3E%3Crect x='320' y='110' width='10' height='20'/%3E%3Crect x='340' y='80' width='30' height='120'/%3E%3Crect x='370' y='140' width='20' height='60'/%3E%3Crect x='390' y='120' width='30' height='80'/%3E%3Crect x='420' y='150' width='40' height='50'/%3E%3Crect x='460' y='100' width='25' height='100'/%3E%3Crect x='470' y='80' width='10' height='20'/%3E%3Crect x='485' y='130' width='35' height='70'/%3E%3Crect x='520' y='110' width='30' height='90'/%3E%3Crect x='550' y='140' width='20' height='60'/%3E%3Crect x='570' y='90' width='40' height='110'/%3E%3Crect x='590' y='70' width='10' height='20'/%3E%3Crect x='610' y='120' width='30' height='80'/%3E%3Crect x='640' y='150' width='50' height='50'/%3E%3Crect x='660' y='130' width='20' height='20'/%3E%3Crect x='690' y='100' width='30' height='100'/%3E%3Crect x='700' y='70' width='15' height='30'/%3E%3Crect x='720' y='130' width='40' height='70'/%3E%3Crect x='760' y='110' width='25' height='90'/%3E%3Crect x='785' y='140' width='35' height='60'/%3E%3Crect x='820' y='90' width='20' height='110'/%3E%3Crect x='840' y='120' width='30' height='80'/%3E%3Crect x='870' y='150' width='40' height='50'/%3E%3Crect x='910' y='100' width='30' height='100'/%3E%3Crect x='940' y='130' width='60' height='70'/%3E%3C/g%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-size: 1000px 200px;
            z-index: -1;
            opacity: 0.7;
        }
        
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0) 50%,
                rgba(0, 0, 0, 0.1) 50%
            );
            background-size: 100% 4px;
            z-index: 999;
            pointer-events: none;
            opacity: 0.3;
        }
        
        .crt-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                ellipse at center,
                rgba(10, 10, 18, 0) 0%,
                rgba(10, 10, 18, 0.5) 90%,
                rgba(10, 10, 18, 0.9) 100%
            );
            z-index: 998;
            pointer-events: none;
        }
        
        .answer-hint {
            margin-top: 20px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--neon-blue);
            font-size: 0.8rem;
            color: var(--neon-blue);
            display: none;
        }
        
        .team-selection {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .team-button {
            margin: 0 10px;
            padding: 10px;
            background-color: transparent;
            border: 2px solid;
            color: white;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .team-button:hover {
            transform: scale(1.05);
        }
        
        .team-button-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .final-team-selection {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .final-team-selection h3 {
            margin-bottom: 10px;
            color: var(--neon-blue);
        }
        
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                opacity: 1;
            }
            20%, 24%, 55% {
                opacity: 0.5;
            }
        }
        
        @keyframes scanline {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 10px var(--neon-green);
            }
            100% {
                box-shadow: 0 0 20px var(--neon-green), 0 0 30px var(--neon-green);
            }
        }
        
        @keyframes glitch {
            0% {
                transform: translate(0);
            }
            20% {
                transform: translate(-5px, 5px);
            }
            40% {
                transform: translate(5px, -5px);
            }
            60% {
                transform: translate(-5px, -5px);
            }
            80% {
                transform: translate(5px, 5px);
            }
            100% {
                transform: translate(0);
            }
        }
        
        @keyframes zombieWalk {
            0% {
                transform: translateX(-50px) scaleX(1);
            }
            49% {
                transform: translateX(calc(50vw - 25px)) scaleX(1);
            }
            50% {
                transform: translateX(calc(50vw - 25px)) scaleX(-1);
            }
            99% {
                transform: translateX(-50px) scaleX(-1);
            }
            100% {
                transform: translateX(-50px) scaleX(1);
            }
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .game-title {
                font-size: 1.5rem;
            }
            
            .category {
                font-size: 0.6rem;
                height: 60px;
                padding: 5px;
            }
            
            .question-cell {
                font-size: 1rem;
                height: 60px;
            }
            
            .teams-container {
                flex-wrap: wrap;
            }
            
            .team {
                margin-bottom: 10px;
                min-width: 120px;
            }
            
            .question-text {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .game-title {
                font-size: 1.2rem;
            }
            
            .category {
                font-size: 0.5rem;
                height: 50px;
            }
            
            .question-cell {
                font-size: 0.8rem;
                height: 50px;
            }
            
            .team {
                min-width: 100px;
            }
            
            .team-icon {
                font-size: 1.5rem;
            }
            
            .team-name {
                font-size: 0.6rem;
            }
            
            .team-score {
                font-size: 1rem;
            }
            
            .question-text {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>
    <div class="crt-effect"></div>
    <div class="city-background"></div>
    
    <div class="container">
        <h1 class="game-title">Z-PARDY: APOCALYPSE GRAMMAR</h1>
        
        <div class="teams-container" id="teams-container">
            <!-- Teams will be generated here -->
        </div>
        
        <div class="game-board" id="game-board">
            <!-- Game board will be generated here -->
        </div>
        
        <div class="final-round" id="final-round">
            <h2>FINAL ROUND: ESCAPE PLAN</h2>
            <div class="final-question">
                Create a fantastic Second Conditional scenario for escaping the infection zone:
                <br><br>
                "If I had access to a secret laboratory, I would..."
            </div>
            
            <div class="final-team-selection">
                <h3>SELECT TEAM WITH BEST ANSWER:</h3>
                <div class="team-selection" id="final-team-selection">
                    <!-- Team buttons will be generated here -->
                </div>
            </div>
            
            <div class="btn-container">
                <button class="btn" id="end-game-btn">END GAME</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="start-modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--neon-yellow);">WELCOME TO Z-PARDY</h2>
            <p style="margin-bottom: 20px; text-align: center;">The world has fallen. Grammar is our only hope.</p>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: var(--neon-blue); margin-bottom: 10px;">SELECT NUMBER OF TEAMS:</h3>
                <div class="btn-container">
                    <button class="btn" data-teams="2">2 TEAMS</button>
                    <button class="btn" data-teams="3">3 TEAMS</button>
                    <button class="btn" data-teams="4">4 TEAMS</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <p style="font-size: 0.8rem; margin-bottom: 10px;">MISSION: MASTER THE SECOND CONDITIONAL</p>
                <p style="font-size: 0.7rem; color: var(--neon-green);">If you were smart, you would survive...</p>
            </div>
        </div>
    </div>
    
    <div class="modal" id="question-modal">
        <div class="modal-content">
            <div class="timer" id="timer">30</div>
            <div class="question-text" id="question-text"></div>
            
            <div class="btn-container" style="margin-bottom: 20px;">
                <button class="btn btn-check" id="check-answer">CHECK ANSWER</button>
            </div>
            
            <div class="answer-hint" id="answer-hint">
                <!-- Answer hint will be shown here -->
            </div>
            
            <div class="team-selection" id="team-selection">
                <!-- Team buttons will be generated here -->
            </div>
            
            <div class="btn-container">
                <button class="btn btn-correct" id="correct-btn">CORRECT</button>
                <button class="btn btn-incorrect" id="incorrect-btn">INCORRECT</button>
                <button class="btn" id="skip-question">SKIP</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <h2 id="result-text" style="text-align: center; margin-bottom: 20px;"></h2>
            <div id="correct-answer" style="text-align: center; margin-bottom: 20px;"></div>
            <div class="zombie-container" id="zombie-reaction"></div>
            <div class="btn-container">
                <button class="btn" id="continue-btn">CONTINUE</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="final-result-modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--neon-yellow);">GAME OVER</h2>
            <div id="winner-text" style="text-align: center; margin-bottom: 20px; font-size: 1.2rem;"></div>
            <div id="final-scores" style="text-align: center; margin-bottom: 30px;"></div>
            <div class="btn-container">
                <button class="btn" id="new-game-btn">NEW GAME</button>
            </div>
        </div>
    </div>
    
    <div class="zombie-container">
        <div class="zombie" style="animation-delay: 0s;"></div>
        <div class="zombie" style="animation-delay: 3s;"></div>
        <div class="zombie" style="animation-delay: 6s;"></div>
    </div>
    
    <script>
        // Game data
        const gameData = {
            categories: [
                "ZOMBIE GRAMMAR",
                "APOCALYPSE LOGIC",
                "SURVIVOR DECISIONS",
                "MUTATION SCENARIOS",
                "DARK HUMOR"
            ],
            questions: [
                // Category 1: ZOMBIE GRAMMAR
                [
                    {
                        question: "If I were bitten, I <strong>would hide</strong> in the bunker.<br><br>What grammatical construction is this?",
                        answer: "second conditional",
                        points: 100
                    },
                    {
                        question: "Complete the sentence using Second Conditional:<br><br>(you / be / a zombie) → If you...",
                        answer: "If you were a zombie, you would",
                        points: 200
                    },
                    {
                        question: "Identify the mistake in this Second Conditional sentence:<br><br>If I will see a zombie, I would run.",
                        answer: "will see should be saw",
                        points: 300
                    },
                    {
                        question: "Complete with the correct form:<br><br>If zombies _____ (attack) our shelter, we _____ (need) to evacuate.",
                        answer: "attacked, would need",
                        points: 400
                    },
                    {
                        question: "Transform into Second Conditional:<br><br>I don't have a weapon. I can't defend myself.",
                        answer: "If I had a weapon, I would be able to defend myself",
                        points: 500
                    }
                ],
                // Category 2: APOCALYPSE LOGIC
                [
                    {
                        question: "What <strong>would</strong> happen <strong>if</strong> the virus spread through water?<br><br>What type of question is this?",
                        answer: "second conditional question",
                        points: 100
                    },
                    {
                        question: "Complete with the correct form:<br><br>If the government _____ (find) a cure, everyone _____ (survive).",
                        answer: "found, would survive",
                        points: 200
                    },
                    {
                        question: "Translate to English:<br><br>Если бы у меня была еда, я бы не вышел наружу.",
                        answer: "If I had food, I would not go outside",
                        points: 300
                    },
                    {
                        question: "Choose the correct option:<br><br>If we _____ enough supplies, we _____ for months.<br>A) had / would survive<br>B) would have / survived<br>C) had / survived",
                        answer: "A) had / would survive",
                        points: 400
                    },
                    {
                        question: "Create a Second Conditional sentence about:<br><br>The consequences if electricity was restored in the apocalypse",
                        answer: "If electricity was restored, we would...",
                        points: 500
                    }
                ],
                // Category 3: SURVIVOR DECISIONS
                [
                    {
                        question: "Complete the Second Conditional sentence:<br><br>If I _____ a survivor group, I _____ join them.",
                        answer: "found, would",
                        points: 100
                    },
                    {
                        question: "Complete with your own idea:<br><br>If I had a flamethrower, I...",
                        answer: "would...",
                        points: 200
                    },
                    {
                        question: "Correct the sentence:<br><br>If I would find a safe zone, I will go there immediately.",
                        answer: "If I found a safe zone, I would go there immediately",
                        points: 300
                    },
                    {
                        question: "Team task: Create 3 sentences on the theme:<br><br>\"If we lived underground, we...\"<br>(Ask the team to share their ideas)",
                        answer: "If we lived underground, we would...",
                        points: 400
                    },
                    {
                        question: "Create a Second Conditional dialogue between two survivors discussing:<br><br>What they would do if they found a helicopter",
                        answer: "If we found a helicopter, we would...",
                        points: 500
                    }
                ],
                // Category 4: MUTATION SCENARIOS
                [
                    {
                        question: "Choose the correct form:<br><br>If she _____ a mutant, she _____ see in the dark.<br>A) was / could<br>B) were / would<br>C) would be / could",
                        answer: "A) was / could",
                        points: 100
                    },
                    {
                        question: "Complete the sentence:<br><br>If the virus _____ (mutate) again, we _____ (be) in trouble.",
                        answer: "mutated, would be",
                        points: 200
                    },
                    {
                        question: "Create a Second Conditional question about:<br><br>The abilities someone would have if they were immune to the virus",
                        answer: "What would you do if you were immune to the virus?",
                        points: 300
                    },
                    {
                        question: "Identify which sentence is Second Conditional:<br><br>A) If I will become immune, I will help others.<br>B) If I became immune, I would help others.<br>C) If I had become immune, I would have helped others.",
                        answer: "B) If I became immune, I would help others.",
                        points: 400
                    },
                    {
                        question: "Create a complex Second Conditional sentence about:<br><br>What would happen if animals could also become zombies",
                        answer: "If animals could also become zombies, they would...",
                        points: 500
                    }
                ],
                // Category 5: DARK HUMOR
                [
                    {
                        question: "Is this sentence correct?<br><br>If zombies danced ballet, the apocalypse <strong>would be</strong> fabulous.",
                        answer: "Yes",
                        points: 100
                    },
                    {
                        question: "Complete with a humorous ending:<br><br>If zombies could talk, they...",
                        answer: "would...",
                        points: 200
                    },
                    {
                        question: "Correct the sentence:<br><br>If I will be the last person on Earth, I will throw a party.",
                        answer: "If I were the last person on Earth, I would throw a party",
                        points: 300
                    },
                    {
                        question: "Create a humorous Second Conditional about:<br><br>Zombies and social media",
                        answer: "If zombies used social media, they would...",
                        points: 400
                    },
                    {
                        question: "Create a dark humor Second Conditional about:<br><br>Dating in the apocalypse",
                        answer: "If dating existed in the apocalypse, it would...",
                        points: 500
                    }
                ]
            ]
        };
        
        // Team data
        const teamIcons = ["🧠", "🧪", "🔥", "🛡️"];
        const teamNames = ["Survivors", "Scientists", "Hunters", "Guards"];
        const teamColors = ["#ff00ff", "#00ffff", "#ffff00", "#00ff00"];
        
        // Game state
        let gameState = {
            teams: [],
            currentTeam: 0,
            selectedQuestions: [],
            remainingQuestions: 25,
            finalRoundStarted: false
        };
        
        // DOM elements
        const startModal = document.getElementById("start-modal");
        const questionModal = document.getElementById("question-modal");
        const resultModal = document.getElementById("result-modal");
        const finalResultModal = document.getElementById("final-result-modal");
        const gameBoard = document.getElementById("game-board");
        const teamsContainer = document.getElementById("teams-container");
        const finalRound = document.getElementById("final-round");
        const answerHint = document.getElementById("answer-hint");
        
        // Initialize the game
        function initGame() {
            startModal.style.display = "flex";
            
            // Set up team selection buttons
            document.querySelectorAll("[data-teams]").forEach(button => {
                button.addEventListener("click", () => {
                    const numTeams = parseInt(button.getAttribute("data-teams"));
                    setupTeams(numTeams);
                    startModal.style.display = "none";
                    renderGameBoard();
                    renderTeams();
                });
            });
        }
        
        // Set up teams
        function setupTeams(numTeams) {
            gameState.teams = [];
            for (let i = 0; i < numTeams; i++) {
                gameState.teams.push({
                    name: teamNames[i],
                    icon: teamIcons[i],
                    color: teamColors[i],
                    score: 0
                });
            }
            gameState.currentTeam = 0;
        }
        
        // Render the game board
        function renderGameBoard() {
            gameBoard.innerHTML = "";
            
            // Add categories
            for (let i = 0; i < gameData.categories.length; i++) {
                const categoryElement = document.createElement("div");
                categoryElement.className = "category";
                categoryElement.textContent = gameData.categories[i];
                gameBoard.appendChild(categoryElement);
            }
            
            // Add question cells
            for (let i = 0; i < 5; i++) { // For each point value
                for (let j = 0; j < 5; j++) { // For each category
                    const points = (i + 1) * 100;
                    const cell = document.createElement("div");
                    cell.className = "question-cell";
                    cell.textContent = points;
                    cell.dataset.category = j;
                    cell.dataset.question = i;
                    cell.dataset.points = points;
                    
                    cell.addEventListener("click", () => {
                        if (!cell.classList.contains("selected")) {
                            cell.classList.add("selected");
                            openQuestion(j, i, points);
                        }
                    });
                    
                    gameBoard.appendChild(cell);
                }
            }
        }
        
        // Render teams
        function renderTeams() {
            teamsContainer.innerHTML = "";
            
            gameState.teams.forEach((team, index) => {
                const teamElement = document.createElement("div");
                teamElement.className = "team";
                if (index === gameState.currentTeam) {
                    teamElement.classList.add("active");
                }
                teamElement.style.borderColor = team.color;
                
                const iconElement = document.createElement("div");
                iconElement.className = "team-icon";
                iconElement.textContent = team.icon;
                
                const nameElement = document.createElement("div");
                nameElement.className = "team-name";
                nameElement.textContent = team.name;
                
                const scoreElement = document.createElement("div");
                scoreElement.className = "team-score";
                scoreElement.textContent = team.score;
                
                teamElement.appendChild(iconElement);
                teamElement.appendChild(nameElement);
                teamElement.appendChild(scoreElement);
                
                teamsContainer.appendChild(teamElement);
            });
        }
        
        // Render team selection buttons
        function renderTeamSelection() {
            const teamSelection = document.getElementById("team-selection");
            teamSelection.innerHTML = "";
            
            gameState.teams.forEach((team, index) => {
                const teamButton = document.createElement("button");
                teamButton.className = "team-button";
                teamButton.style.borderColor = team.color;
                teamButton.dataset.team = index;
                
                const iconElement = document.createElement("div");
                iconElement.className = "team-button-icon";
                iconElement.textContent = team.icon;
                
                const nameElement = document.createElement("div");
                nameElement.textContent = team.name;
                
                teamButton.appendChild(iconElement);
                teamButton.appendChild(nameElement);
                
                teamButton.addEventListener("click", () => {
                    gameState.currentTeam = index;
                    renderTeams();
                });
                
                teamSelection.appendChild(teamButton);
            });
        }
        
        // Render final team selection
        function renderFinalTeamSelection() {
            const finalTeamSelection = document.getElementById("final-team-selection");
            finalTeamSelection.innerHTML = "";
            
            gameState.teams.forEach((team, index) => {
                const teamButton = document.createElement("button");
                teamButton.className = "team-button";
                teamButton.style.borderColor = team.color;
                teamButton.dataset.team = index;
                
                const iconElement = document.createElement("div");
                iconElement.className = "team-button-icon";
                iconElement.textContent = team.icon;
                
                const nameElement = document.createElement("div");
                nameElement.textContent = team.name;
                
                teamButton.appendChild(iconElement);
                teamButton.appendChild(nameElement);
                
                teamButton.addEventListener("click", () => {
                    // Award bonus points for final round
                    gameState.teams[index].score += 1000;
                    endGame();
                });
                
                finalTeamSelection.appendChild(teamButton);
            });
        }
        
        // Open a question
        function openQuestion(categoryIndex, questionIndex, points) {
            const question = gameData.questions[categoryIndex][questionIndex];
            const questionText = document.getElementById("question-text");
            
            questionText.innerHTML = question.question;
            answerHint.innerHTML = `<strong>Answer:</strong> ${question.answer}`;
            answerHint.style.display = "none"; // Hide answer initially
            
            questionModal.style.display = "flex";
            
            // Render team selection
            renderTeamSelection();
            
            // Set up check answer button
            const checkAnswerButton = document.getElementById("check-answer");
            checkAnswerButton.onclick = () => {
                answerHint.style.display = "block"; // Show answer when check button is clicked
            };
            
            // Set up timer
            let timeLeft = 30;
            const timerElement = document.getElementById("timer");
            timerElement.textContent = timeLeft;
            
            const timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    showResult(false, question.answer);
                }
            }, 1000);
            
            // Set up correct button
            const correctButton = document.getElementById("correct-btn");
            correctButton.onclick = () => {
                clearInterval(timer);
                showResult(true, question.answer);
            };
            
            // Set up incorrect button
            const incorrectButton = document.getElementById("incorrect-btn");
            incorrectButton.onclick = () => {
                clearInterval(timer);
                showResult(false, question.answer);
            };
            
            // Set up skip button
            const skipButton = document.getElementById("skip-question");
            skipButton.onclick = () => {
                clearInterval(timer);
                showResult(false, question.answer);
            };
            
            // Store current question data
            gameState.currentQuestion = {
                categoryIndex,
                questionIndex,
                points
            };
            
            gameState.remainingQuestions--;
        }
        
        // Show result
        function showResult(isCorrect, correctAnswer) {
            questionModal.style.display = "none";
            resultModal.style.display = "flex";
            
            const resultText = document.getElementById("result-text");
            const correctAnswerElement = document.getElementById("correct-answer");
            const zombieReaction = document.getElementById("zombie-reaction");
            
            if (isCorrect) {
                resultText.textContent = "CORRECT!";
                resultText.style.color = "var(--neon-green)";
                gameState.teams[gameState.currentTeam].score += gameState.currentQuestion.points;
                
                // Happy zombie
                zombieReaction.innerHTML = `
                    <div class="zombie" style="left: 50%; transform: translateX(-50%); animation: none;">
                        <div style="position: absolute; top: -20px; left: 10px; color: var(--neon-green); font-size: 24px;">👍</div>
                    </div>
                `;
            } else {
                resultText.textContent = "WRONG!";
                resultText.style.color = "var(--neon-pink)";
                
                // Angry zombie
                zombieReaction.innerHTML = `
                    <div class="zombie" style="left: 50%; transform: translateX(-50%); animation: none;">
                        <div style="position: absolute; top: -20px; left: 10px; color: var(--neon-pink); font-size: 24px;">👎</div>
                    </div>
                `;
            }
            
            correctAnswerElement.innerHTML = `Correct answer: <span style="color: var(--neon-blue)">${correctAnswer}</span>`;
            
            // Set up continue button
            const continueButton = document.getElementById("continue-btn");
            continueButton.onclick = () => {
                resultModal.style.display = "none";
                nextTurn();
            };
        }
        
        // Next turn
        function nextTurn() {
            // Move to next team
            gameState.currentTeam = (gameState.currentTeam + 1) % gameState.teams.length;
            renderTeams();
            
            // Check if all questions are answered
            if (gameState.remainingQuestions <= 0 && !gameState.finalRoundStarted) {
                startFinalRound();
            }
        }
        
        // Start final round
        function startFinalRound() {
            gameState.finalRoundStarted = true;
            gameBoard.style.display = "none";
            finalRound.style.display = "block";
            
            // Render final team selection
            renderFinalTeamSelection();
            
            // Set up end game button
            const endGameButton = document.getElementById("end-game-btn");
            endGameButton.onclick = () => {
                endGame();
            };
        }
        
        // End game
        function endGame() {
            finalRound.style.display = "none";
            finalResultModal.style.display = "flex";
            
            // Find winner
            let maxScore = -1;
            let winnerIndex = -1;
            let isTie = false;
            
            gameState.teams.forEach((team, index) => {
                if (team.score > maxScore) {
                    maxScore = team.score;
                    winnerIndex = index;
                    isTie = false;
                } else if (team.score === maxScore) {
                    isTie = true;
                }
            });
            
            // Display winner
            const winnerText = document.getElementById("winner-text");
            if (isTie) {
                winnerText.innerHTML = `IT'S A TIE!<br>If there were no zombies, you would all survive!`;
            } else {
                const winner = gameState.teams[winnerIndex];
                winnerText.innerHTML = `${winner.icon} TEAM ${winner.name.toUpperCase()} WINS!<br>If zombies attacked, they would survive!`;
                winnerText.style.color = winner.color;
            }
            
            // Display final scores
            const finalScores = document.getElementById("final-scores");
            finalScores.innerHTML = "";
            
            gameState.teams.forEach(team => {
                finalScores.innerHTML += `<div>${team.icon} ${team.name}: <span style="color: ${team.color}">${team.score}</span></div>`;
            });
            
            // Set up new game button
            const newGameButton = document.getElementById("new-game-btn");
            newGameButton.onclick = () => {
                finalResultModal.style.display = "none";
                initGame();
            };
        }
        
        // Create pixel art zombies
        function createPixelZombies() {
            const zombieContainer = document.querySelector(".zombie-container");
            
            for (let i = 0; i < 3; i++) {
                const zombie = document.createElement("div");
                zombie.className = "zombie";
                zombie.style.animationDelay = `${i * 3}s`;
                zombieContainer.appendChild(zombie);
            }
        }
        
        // Start the game
        window.onload = () => {
            initGame();
            createPixelZombies();
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95f91af3d1400ad6',t:'MTc1MjU4MDg4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
